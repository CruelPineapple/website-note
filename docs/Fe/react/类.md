# ç±»
ä»ç°åœ¨å¼€å§‹ä»å¤´çœ‹ReactğŸ‘€ï¼Œè¿™ä¸€ç¯‡æ˜¯è·Ÿç€reactè¯´çš„ï¼Œéœ€è¦å…ˆçœ‹çš„jså†…å®¹ï¼Œåæ­£es6ä¹Ÿæ²¡ç³»ç»Ÿçœ‹è¿‡ï¼Œå°±æ­£å¥½çœ‹äº†ã€‚

ç±»æ˜¯ç‰¹æ®Šçš„å‡½æ•°ï¼Œæ˜¯ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿ã€‚å’Œå®šä¹‰å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜ç±»ä¼¼ï¼Œç±»ä¹Ÿæœ‰ä¸¤ç§å®šä¹‰æ–¹å¼ï¼Œç±»è¡¨è¾¾å¼å’Œç±»å£°æ˜ã€‚

ç±»æ˜¯ä¸€çº§å…¬æ°‘ï¼ˆèƒ½è¢«å½“ä½œå€¼æ¥ç”¨çš„å°±æ˜¯ä¸€çº§å…¬æ°‘ï¼‰æ­¤ç‰¹æ€§è®©jsç‹¬ä¸€æ— äºŒ

### ç±»å£°æ˜

classå…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªç±»ï¼Œéœ€è¦æ³¨æ„ï¼Œç±»å£°æ˜æ²¡æœ‰æå‡ï¼Œä¸å‡½æ•°å£°æ˜æå‡åŒºåˆ«

### ç±»è¡¨è¾¾å¼

å¯ä»¥å‘½åæˆ–è€…ä¸å‘½åï¼Œå‘½åç±»è¡¨è¾¾å¼çš„åç§°æ˜¯è¯¥ç±»çš„å±€éƒ¨åç§°ï¼Œå¯ä»¥é€šè¿‡ç±»çš„nameå±æ€§æ¥æ£€ç´¢ï¼š

```js
// æœªå‘½å/åŒ¿åç±»
let Rectangle = class {
  constructor(height, width) {
    this.height = height;
    this.width = width;
  }
};
console.log(Rectangle.name);
// output: "Rectangle"

// å‘½åç±»
let Rectangle = class Rectangle2 {
  constructor(height, width) {
    this.height = height;
    this.width = width;
  }
};
console.log(Rectangle.name);
// è¾“å‡º: "Rectangle2"
```

## ç±»ä½“å’Œæ–¹æ³•å®šä¹‰

ç±»çš„ä¸»ä½“ï¼Œå¦‚æ„é€ å‡½æ•°ï¼Œé™æ€æ–¹æ³•ï¼ŒåŸå‹æ–¹æ³•ï¼Œgetterå’Œsetteréƒ½åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œã€‚ç±»çš„å±æ€§æœ‰nameï¼Œå…¬å…±å±æ€§ï¼ˆé€šè¿‡prototypeå®šä¹‰çš„å±æ€§ï¼‰ï¼Œå®ä¾‹å±æ€§ï¼ˆæ„é€ å™¨åœ¨thisä¸Šå®šä¹‰çš„ï¼‰

### æ„é€ å‡½æ•°

constructoræ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ªç”±classåˆ›å»ºçš„å¯¹è±¡ï¼Œä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥ç”¨superå…³é”®å­—è°ƒç”¨ä¸€ä¸ªçˆ¶ç±»çš„æ„é€ å‡½æ•°

è¿™é‡Œè¡¥å……ä»‹ç»è‡ªæœ‰å±æ€§ï¼šå‡ºç°åœ¨å®ä¾‹è€ŒéåŸå‹çš„å±æ€§ï¼Œã€Šæ·±å…¥ç†è§£es6ã€‹ä¸­å»ºè®®åœ¨æ„é€ å™¨ä¸­åˆ›å»ºæ‰€æœ‰å¯èƒ½å‡ºç°çš„è‡ªæœ‰å±æ€§ï¼Œè¿™æ ·ç±»ä¸­å£°æ˜çš„å˜é‡å°±ä¼šè¢«é™åˆ¶åœ¨ä¸€ä¸ªä½ç½®ä»è€Œä¾¿äºæ£€æŸ¥

é™¤éæ˜¾å¼å®šä¹‰åœ¨thisä¸Šçš„å±æ€§ï¼Œå…¶ä»–å±æ€§éƒ½ä¼šåœ¨åŸå‹ä¸Š

### åŸå‹æ–¹æ³•

es6çš„ç®€åŒ–æ–¹æ³•å®šä¹‰ï¼Œå¯ä»¥ç›´æ¥åœ¨å¯¹è±¡é‡Œé¢å†™å‡½æ•°ä½œä¸ºæ–¹æ³•ï¼š

```js
class Rectangle {
    // constructor
    constructor(height, width) {
        this.height = height;
        this.width = width;
    }
    // Getter
    get area() {
        return this.calcArea()
    }
    // Method
    calcArea() {
        return this.height * this.width;
    }
}
const square = new Rectangle(10, 10);

console.log(square.area);
// 100
```

### é™æ€æ–¹æ³•

staticå…³é”®å­—å®šä¹‰çš„æ–¹æ³•ï¼Œä¸èƒ½é€šè¿‡å®ä¾‹è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåªèƒ½é€šè¿‡ç±»ã€‚è°ƒç”¨é™æ€æ–¹æ³•ä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»ï¼ŒMDNé€šè¿‡ä¸€ä¸ªä¾‹å­ç»™å‡ºäº†é™æ€æ–¹æ³•é€šå¸¸çš„ç”¨æ³•ï¼š

```js
class Point {
    constructor(x, y) {
        this.x = x;
        this.y = y;
    }
    
    static displayName = "Point";

    static distance(a, b) {
        const dx = a.x - b.x;
        const dy = a.y - b.y;
        return Math.hypot(dx, dy);
    }
}

const p1 = new Point(5, 5);
const p2 = new Point(10,10);
p1.displayName;
// undefined
p1.distance;
// undefined

console.log(Point.displayName);
// "Point"
console.log(Point.distance(p1, p2));
// 7.0710678118654755
```

### ç§æœ‰å­—æ®µ

ä½¿ç”¨#ç¬¦å·ä¿®é¥°çš„å­—æ®µä¼šä½œä¸ºç§æœ‰å­—æ®µï¼Œåªèƒ½ç”±æœ¬å®ä¾‹è®¿é—®

### getterå’Œsetter

ç”¨äºè¯»å–å’Œæ“ä½œå­—æ®µçš„æ–¹æ³•ï¼Œä¾‹å¦‚å°è£…ç§æœ‰å­—æ®µï¼š

```js
class User {
    #nameValue;

    constructor(name) {
        this.name = name;
    }

    get name() {
        return this.#nameValue;
    }

    set name(name) {
        if (name === "") {
            throw new Error(`name field of User cannot be empty`);
        }
        this.#nameValue = name;
    }
}

const user = new User("Fundebug");
user.name; // getter è¢«è°ƒç”¨, => 'Fundebug'
user.name = "Code"; // setter è¢«è°ƒç”¨

user.name = ""; // setter æŠ›å‡ºä¸€ä¸ªé”™è¯¯
```

getterå’Œsetterå¿…é¡»åŒæ—¶å‡ºç°åŒçº§å‡ºç°

### æˆå‘˜å

æˆå‘˜åå¯ä»¥è®¡ç®—å¾—å‡ºï¼Œé€šè¿‡æ–¹æ‹¬å·æŠŠè¦è®¡ç®—çš„å˜é‡æ‰©èµ·æ¥ï¼š

```js
let methodName = "sayName";

class PersonClass{
  constructor(name){
    this.name = name;
  }
  [methodName](){
    console.log(this.name);
  }
}
let me = new PersonClass("Nicholas");
me.sayname(); //Nicholas
```



## thisç»‘å®š

ç”±äºåŸå‹æ–¹æ³•å’Œé™æ€æ–¹æ³•æ€»æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼è¿è¡Œï¼Œå®ƒä»¬çš„thisé»˜è®¤æ˜¯undefinedï¼Œè™½ç„¶newæ“ä½œä¼šï¼š

1. åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å•JavaScriptå¯¹è±¡ï¼ˆå³`**{}**`ï¼‰ï¼›
2. ä¸ºæ­¥éª¤1æ–°åˆ›å»ºçš„å¯¹è±¡æ·»åŠ å±æ€§**__proto__**ï¼Œå°†è¯¥å±æ€§é“¾æ¥è‡³æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡
3. å°†æ­¥éª¤1æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸º`**this**`çš„ä¸Šä¸‹æ–‡ ï¼›
4. å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›`**this**`ã€‚

ä½†æ˜¯å½“å‡ºç°å•ç‹¬è°ƒç”¨çš„æƒ…å†µå°±ä¼šå¯¼è‡´thisæ²¡æœ‰æ­£ç¡®åœ°æŒ‡å‘å®ä¾‹ã€‚ä¾‹å¦‚reactäº‹ä»¶å›è°ƒéœ€è¦ç»‘å®šï¼ŒåŸç†å…¶å®å°±æ˜¯å®ƒçš„äº‹ä»¶å¤„ç†æ–¹æ³•è¢«ä½œä¸ºå›è°ƒå‡½æ•°ç»‘å®šäº†ã€‚reactçš„jsxç­‰ä»·äºReact.createElementï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š

```js
function createElement(dom, params) {
  var domObj = document.createElement(dom);
  domObj.onclick = params.onclick;
  domObj.innerHTML = params.conent;
  return domObj
}
```

paramså°±æ˜¯ç»„ä»¶å®ä¾‹ï¼Œæˆ‘ä»¬å®šä¹‰åœ¨ä¸Šé¢çš„onclickæ–¹æ³•ä½œä¸ºå›è°ƒå‡½æ•°ç»‘å®šåœ¨å®é™…çš„domå…ƒç´ ä¸Šï¼Œå¯¼è‡´äº‹ä»¶å¤„ç†æ–¹æ³•ä¸­çš„thisä¸¢å¤±äº†paramsï¼ˆä¹Ÿå°±æ˜¯ç»„ä»¶å®ä¾‹ï¼‰çš„å¼•ç”¨ã€‚åœ¨äº‹ä»¶å¤„ç†æ–¹æ³•ä¸Šç»‘å®šthiså°±å¯ä»¥è®©thiså§‹ç»ˆæŒ‡å‘ç»„ä»¶å®ä¾‹ã€‚ä½¿ç”¨ç®­å¤´å‡½æ•°åŒæ ·å¯ä»¥è®©thisæŒ‡å‘æ­£ç¡®ã€‚

## ä¸ES5çš„ç±»å‹è”ç³»

ä¸€ä¸ªES5çš„æ¨¡å¼ï¼š

```js
function PersonType(name){
  this.name = name;
}

// é™æ€æ–¹æ³•
PersonType.create = function(name){
  return new PersonType(name);
};

// å®ä¾‹æ–¹æ³•
PersonType.prototype.sayName = function(){
  console.log(this.name);
};

var person = PersonType.create("Nicholas");
```

å’Œå®ƒç­‰ä»·çš„ES6å†™æ³•å¦‚ä¸‹ï¼š

```js
class PersonClass{
  //ç­‰ä»·äºPersonTypeæ„é€ å™¨
  constructor(name){
    this.name = name;
  }
  
  //ç­‰ä»·äºPersonType.prototype.sayName
  sayName(){
    console.log(this.name);
  }
  
  //ç­‰ä»·äºPersonType.create
  static create(name){
    return new PersonClass(name);
  }
}

let person = PersonClass.create("Nicholas");
```

é™æ€æˆå‘˜ä¸èƒ½ç”¨å®ä¾‹æ¥è®¿é—®ï¼Œå§‹ç»ˆéœ€è¦é€šè¿‡ç±»æ¥è®¿é—®ï¼ˆå¥½åƒå‰é¢è¯´è¿‡äº†ï¼‰

## æ´¾ç”Ÿç±»ç»§æ‰¿

ES6ä¹‹å‰å®ç°è‡ªå®šä¹‰ç±»å‹çš„ç»§æ‰¿æ˜¯ä¸ªç¹ççš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼š

```js
function Rectangle(length, width){
  this.length = length;
  this.width = width;
}

Rectangle.prototype.getArea = function(){
  return this.length * this.width;
};

function Square(length){
  Rectangle.call(this, length, length);
}

Square.prototype = Object.create(Rectangle.prototype,{
  constructor:{
    value: Square,
    enumerable: true,
    writable: true,
    configurable: true
  }
});

var square = new Square(3);

console.log(square.getArea()); //9
console.log(square instanceof Square); //true
conaole.log(square instanceof Rectangle); //true
```

æ’å…¥çŸ¥è¯†ï¼šObject.createï¼Œç”¨æ‰€ç»™çš„åŸå‹åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡çš„åŸå‹ï¼Œå¯é€‰å‚æ•°æ˜¯è¢«å¡è¿›æ–°åŸå‹çš„ä¸œè¥¿ï¼Œå†™æ³•å’ŒdefinePropertyç›¸åŒã€‚è¿™é‡Œç”¨Rectangleçš„åŸå‹ä½œSquareçš„åŸå‹ï¼Œå¹¶ä¸”æŒ‡å®šäº†constructorå±æ€§ä¸ºSquareã€‚ä½¿ç”¨Object.createæ˜¯ä¸€ç§æ‰€æœ‰ç‰ˆæœ¬jséƒ½æ”¯æŒçš„å•ä¾‹ç»§æ‰¿ã€‚

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒSquareç»§æ‰¿äº†Rectangleï¼ˆé€šè¿‡Rectangle.prototypeæ‰€åˆ›å»ºçš„æ–°å¯¹è±¡æ¥é‡å†™Square.prototypeï¼Œå¹¶ä¸”è°ƒç”¨Rectangle.callæ–¹æ³•ï¼‰ä½¿ç”¨es6ç±»è¿›è¡Œç­‰ä»·çš„ç»§æ‰¿ï¼š

```js
class Rectangle{
  constructor(length,width){
    this.length = length;
    this.width = width;
  }
 
 getArea(){
   return this.length * this.width;
 }
}

class Square extends Rectangle{
  constructor(length){
    //ä¸Rectangle.call(this, length, length)ç›¸åŒ
    super(length, length);
  }
}

var square = new Square(3);
```

### å±è”½ç±»æ–¹æ³•

æ´¾ç”Ÿç±»ä¸­çš„æ–¹æ³•å¯ä»¥é‡æ–°å®šä¹‰ï¼Œè¿™æ—¶å€™é€šè¿‡super.æ–¹æ³•åè°ƒç”¨åŸºç±»

### ç»§æ‰¿é™æ€æˆå‘˜

å¦‚æœåŸºç±»åŒ…å«é™æ€æˆå‘˜ï¼Œé‚£ä¹ˆè¿™äº›é™æ€æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä¹Ÿæ˜¯å¯ç”¨çš„

### ä»è¡¨è¾¾å¼æ´¾ç”Ÿç±»

åªè¦ä¸€ä¸ªè¡¨è¾¾å¼èƒ½å¤Ÿè¿”å›ä¸€ä¸ªå…·æœ‰ã€constructã€‘å±æ€§ä»¥åŠåŸå‹çš„å‡½æ•°ï¼Œå°±å¯ä»¥å¯¹å…¶ä½¿ç”¨extendsï¼š

```js
function Rectangle(length, width){
  this.length = length;
  this.width = width;
}

Rectangle.prototype.getArea = function(){
  return this.length * this.width;
};

class Square extends Rectangle{
  constructor(length){
    super(length, length);
  }
}
```

### ç»§æ‰¿å†…ç½®å¯¹è±¡

ES5ç»§æ‰¿å’ŒES6ç»§æ‰¿çš„ä¸ä¸€æ ·ä¹‹å¤„åœ¨äºï¼Œç±»ç»§æ‰¿èƒ½å¤Ÿæ­£ç¡®åœ°è·å¾—å†…ç½®å¯¹è±¡çš„ä¸€äº›ç‰¹æ€§ã€‚ä¾‹å¦‚ES5åŠæ—©æœŸç‰ˆæœ¬ä¸­ï¼Œè¯•å›¾ç»§æ‰¿Arrayåˆ›å»ºè‡ªå®šä¹‰æ•°ç»„ç±»å‹æ˜¯ä¸èƒ½æ­£ç¡®å·¥ä½œçš„ï¼š

```js
// å†…ç½®æ•°ç»„çš„è¡Œä¸º 
var colors = []; 
colors[0] = "red"; 
console.log(colors.length); // 1 
colors.length = 0; 
console.log(colors[0]); // undefined 
// åœ¨ ES5 ä¸­å°è¯•ç»§æ‰¿æ•°ç»„ 
function MyArray() { 
  Array.apply(this, arguments); 
}
MyArray.prototype = Object.create(Array.prototype, {
  constructor: { 
  	value: MyArray, 
  	writable: true, 
  	configurable: true, 
  	enumerable: true 
	} 
}); 
var colors = new MyArray(); 
colors[0] = "red"; 
console.log(colors.length); // 0 
colors.length = 0; 
console.log(colors[0]); // "red"
```

ç±»çš„è®¾è®¡ç›®çš„ä¹‹ä¸€å°±æ˜¯å…è®¸ç»§æ‰¿å†…ç½®å¯¹è±¡ï¼Œå› æ­¤ç»§æ‰¿æ¨¡å‹ä¸ä»¥å¾€çš„æœ‰æ‰€å·®å¼‚ã€‚ä¼ ç»Ÿç»§æ‰¿ä¸­ï¼Œthisçš„å€¼ä¼šå…ˆè¢«æ´¾ç”Ÿç±»ï¼ˆä¾‹å¦‚MyArrayï¼‰åˆ›å»ºï¼ŒéšååŸºç±»æ„é€ å™¨ï¼ˆä¾‹å¦‚Array.applyï¼‰æ‰è¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€thisä¸€å¼€å§‹å°±æ˜¯MyArrayçš„å®ä¾‹ï¼Œéšåæ‰ç”¨Arrayçš„é™„åŠ å±æ€§å¯¹å…¶è¿›è¡Œè£…é¥°ã€‚

åŸºäºç±»çš„ç»§æ‰¿ä¸­ï¼Œthisçš„å€¼ä¼šå…ˆè¢«åŸºç±»ï¼ˆArrayï¼‰åˆ›å»ºï¼Œéšåæ‰è¢«æ´¾ç”Ÿç±»çš„æ„é€ å™¨ï¼ˆMyArrayï¼‰ä¿®æ”¹ã€‚ç»“æœå°±æ˜¯ï¼Œthisåˆå§‹å°±æ‹¥æœ‰ä½œä¸ºåŸºç±»çš„å†…ç½®å¯¹è±¡çš„æ‰€æœ‰åŠŸèƒ½ï¼š

```js
class MyArray extends Array{
  //ç©ºçš„
}

var colors = new MyArray();
colors[0] = "red"; 
console.log(colors.length); // 0 
colors.length = 0; 
console.log(colors[0]); // undefined
```

