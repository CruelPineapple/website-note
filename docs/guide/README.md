# 用法
用于万一哪天我想不起来怎么用了可以参考一下，节约了我重复查询的时间。
## 自动部署
因为一开始没有研究vuePress的自动部署，本项目采用了手动build然后push最后服务器pull（懂得太少而且部署频率也不高）。简单查询了一下，一步一步搭建了基于sh脚本的自动部署。

我解决的第一个问题是自动化前往服务器拉取位于GitHub仓库的代码（已经build好的）。这里先要介绍一下原先的部署流程：

首先vuepress进行build，我专门搞了一个用来部署的仓库，把build好的东西拉到部署用的仓库的本地目录，add，commit，push，然后去服务器把这个仓库的更新拉下来。

我一开始的sh脚本位于部署用的仓库里面，用来一键完成add，commit，push，然后前往服务器拉取更新。它长这样：

```sh
git add -A
git commit -m "auto deploy"
git push
ssh root@xxx.xxx.xxx.xxx
cd project directory
git pull
```

很快我就发现这么搞没法让服务器拉到东西，因为ssh命令之后的脚本就没执行了。查询得知，要远程执行的部分需要用引号扩起来，如果是很多行代码需要远程执行，还有eeooff还是叫啥的。显然，我只需要移动到目录然后pull就行了，于是代码改成了这样：

```sh
git add -A
git commit -m "auto deploy"
git push
ssh root@xxx.xxx.xxx.xxx "cd project directory;git pull"
```

注意，引号里面的每句话之间用分号隔开。

这时候我就拥有了一个自动推拉仓库的脚本。显然我还不满足，因为在用上这个脚本之前还需要进行：runbuild，把dist里面的东西拖到部署仓库，点击确认覆盖，接下来才能用上我的自动推拉脚本。

接下来我就开始想办法自动化完成把dist里面的东西挪到部署仓库的工作。首先研究了mv命令，我是这么搞的：

```sh
cd dist所在目录
mv -f dist/* /部署仓库目录
```

结果发现，mv的-f参数，没法把文件夹给覆盖移动了，只有单个文件成功地挪过去了。于是我就打算绕个弯，先去部署仓库里面把东西删了，然后再挪。为了方便调试，我把删除动作也搞成了一个sh脚本，虽然最后就一句话的内容：

```sh
rm -rf `ls |grep -v ".sh"`
```

又是之前没咋用过的命令（我接触unix还是有点少），经过查询才研究出来怎么让删除动作留下我的自动推拉脚本。它是这样的：grep命令找出ls里面所有带.sh的文件，就是我的俩脚本，然后用-v参数反选，最后的结果就是目录下除了sh脚本的其他东西，然后把这一串东西传给rm -rf去删了。本来还担心这样rm -rf会把git仓库也给一起扬了，经过实验发现是不会的，因为git仓库是隐藏的，ls不会把它列出来，也就不会被删掉了。

于是现在，在部署仓库里面有两个脚本，在工作目录里面有一个脚本，这个工作目录里面的脚本就是终极一键部署，它长这样：

```sh
cd /部署仓库
./del.sh #我的删除脚本叫这个，也可以直接把那句话写出来：
# rm -rf `ls |grep -v ".sh"`
cd /dist所在仓库
mv -f dist/* /部署仓库目录
cd /部署仓库
./d.sh #这就是我的自动推拉脚本
```



最终的自动化部署流程就是这样的：首先runbuild，然后执行上面那样的脚本，它就会先去清理部署仓库，然后把build内容挪进去，最后完成仓库的推拉。

到这里我的自动部署工具就搭建完成了！🥳

你发现了吗？这一套部署流程不光可以用在vuepress的更新，还能用来部署前端项目

你没有！但是我发现了！我只关心你自己！😇

花了一点点时间把三个脚本拼起来了，这样部署文件夹就用不着带着sh脚本了
### 1. 写一篇md
我相信来看这玩意的时候，md已经写好了，只是突然忘了怎么把它加进目录里面之类的
### 2. 在config.js里面增加sidebar内容
跟着上面已经有的目录写，如果页面空白的话检查路径，包括大小写  
btw，sidebar里面的文章标题就是md内部写的标题
### 3. 保存并重启
保存config.js，但是别忘了，修改config后的热更新不能完全展示为正确的状态，需要重新启动调试。
### 其他疑难杂症/扩展等
#### 换行
在行尾设置两个空格

---

#### VuePress功能
```
::: tip
这是一个提示
:::

::: warning
这是一个警告
:::

::: danger
这是一个危险警告
:::
```